<!DOCTYPE html>
<html>
<head>
    <title>Telegram Debug</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; padding: 20px; word-break: break-all; }
        .box { border: 1px solid #333; padding: 10px; margin-bottom: 10px; }
        h3 { color: #fff; margin-top: 0; }
    </style>
</head>
<body>
    <h1>Deep Debug</h1>
    <div class="box">
        <h3>1. WebApp Object</h3>
        <div id="status">Checking...</div>
    </div>
    <div class="box">
        <h3>2. InitData (SDK)</h3>
        <div id="sdk-data"></div>
    </div>
    <div class="box">
        <h3>3. URL Hash (Raw)</h3>
        <div id="hash-data"></div>
    </div>
    <button onclick="window.location.reload()" style="padding: 10px; width: 100%; font-size: 16px;">Reload</button>

    <script>
        try {
            const tg = window.Telegram.WebApp;
            document.getElementById('status').innerText = "SDK Loaded: " + (tg ? "YES" : "NO");
            
            if (tg) {
                tg.ready();
                tg.expand();
                
                const data = tg.initData;
                document.getElementById('sdk-data').innerText = 
                    "Length: " + (data ? data.length : 0) + "\n\n" + 
                    (data || "EMPTY");
            }
            
            const hash = window.location.hash;
            document.getElementById('hash-data').innerText = 
                "Length: " + (hash ? hash.length : 0) + "\n\n" + 
                (hash || "EMPTY");
                
        } catch (e) {
            document.getElementById('status').innerText = "Error: " + e.message;
        }
    </script>
</body>
</html>
